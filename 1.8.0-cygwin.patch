--- origsrc/js/src/config/CYGWIN.mk	1969-12-31 18:00:00.000000000 -0600
+++ src/js/src/config/CYGWIN.mk	2010-06-08 05:17:48.111219200 -0500
@@ -0,0 +1,64 @@
+# -*- Mode: makefile -*-
+#
+# ***** BEGIN LICENSE BLOCK *****
+# Version: MPL 1.1/GPL 2.0/LGPL 2.1
+#
+# The contents of this file are subject to the Mozilla Public License Version
+# 1.1 (the "License"); you may not use this file except in compliance with
+# the License. You may obtain a copy of the License at
+# http://www.mozilla.org/MPL/
+#
+# Software distributed under the License is distributed on an "AS IS" basis,
+# WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
+# for the specific language governing rights and limitations under the
+# License.
+#
+# The Original Code is Mozilla Communicator client code, released
+# March 31, 1998.
+#
+# The Initial Developer of the Original Code is
+# Netscape Communications Corporation.
+# Portions created by the Initial Developer are Copyright (C) 1998
+# the Initial Developer. All Rights Reserved.
+#
+# Contributor(s):
+#
+# Alternatively, the contents of this file may be used under the terms of
+# either the GNU General Public License Version 2 or later (the "GPL"), or
+# the GNU Lesser General Public License Version 2.1 or later (the "LGPL"),
+# in which case the provisions of the GPL or the LGPL are applicable instead
+# of those above. If you wish to allow use of your version of this file only
+# under the terms of either the GPL or the LGPL, and not to allow others to
+# use your version of this file under the terms of the MPL, indicate your
+# decision by deleting the provisions above and replace them with the notice
+# and other provisions required by the GPL or the LGPL. If you do not delete
+# the provisions above, a recipient may use your version of this file under
+# the terms of any one of the MPL, the GPL or the LGPL.
+#
+# ***** END LICENSE BLOCK *****
+
+#
+# Config for all versions of Cygwin
+#
+
+CC = gcc
+CCC = g++
+CFLAGS +=  -Wall -Wno-format -MMD
+OS_CFLAGS = -DXP_UNIX -DSVR4 -DSYSV -D_BSD_SOURCE -DPOSIX_SOURCE -DHAVE_LOCALTIME_R
+
+RANLIB = ranlib
+MKSHLIB = $(CC) -shared $(XMKSHLIBOPTS) -Wl,--enable-auto-image-base,--out-implib,$(subst cyg,lib,$(@)).a
+
+SO_PREFIX = cyg
+SO_SUFFIX = dll
+
+GFX_ARCH = x
+
+OS_LIBS =
+
+ASFLAGS += -x assembler-with-cpp
+
+# Use the editline library to provide line-editing support.
+JS_READLINE = 1
+
+OS_CFLAGS += -DHAVE_VA_COPY -DVA_COPY=va_copy -DPIC
--- origsrc/js/src/config.mk	2008-03-12 09:36:06.000000000 -0500
+++ src/js/src/config.mk	2010-06-07 20:01:02.607533700 -0500
@@ -79,7 +79,7 @@ ifeq ($(OS_ARCH), Windows_NT)
 endif
 ifeq (CYGWIN_NT,$(findstring CYGWIN_NT,$(OS_ARCH)))
 	OS_RELEASE := $(patsubst CYGWIN_NT-%,%,$(OS_ARCH))
-	OS_ARCH    := WINNT
+	OS_ARCH    := CYGWIN
 endif
 ifeq ($(OS_ARCH), CYGWIN32_NT)
 	OS_ARCH    := WINNT
@@ -100,10 +100,14 @@ else
 ifeq ($(OS_ARCH),Darwin)
 OS_CONFIG      := Darwin
 else
+ifeq ($(OS_ARCH),CYGWIN)
+OS_CONFIG      := CYGWIN
+else
 OS_CONFIG       := $(OS_ARCH)$(OS_OBJTYPE)$(OS_RELEASE)
 endif
 endif
 endif
+endif
 
 ASFLAGS         =
 DEFINES         =
@@ -139,6 +143,7 @@ DEFINES    += -DDEBUG -DDEBUG_$(USER)
 OBJDIR_TAG = _DBG
 endif
 
+SO_PREFIX = lib
 SO_SUFFIX = so
 
 NS_USE_NATIVE = 1
--- origsrc/js/src/Makefile.ref	2010-06-07 19:58:42.637527900 -0500
+++ src/js/src/Makefile.ref	2010-06-07 20:23:16.709840000 -0500
@@ -265,8 +265,8 @@ LIBRARY = $(OBJDIR)/js32.lib
 SHARED_LIBRARY = $(OBJDIR)/js32.dll
 PROGRAM = $(OBJDIR)/js.exe
 else
-LIBRARY = $(OBJDIR)/libjs.a
-SHARED_LIBRARY = $(OBJDIR)/libjs.$(SO_SUFFIX)
+LIBRARY = $(OBJDIR)/libmozjs.a
+SHARED_LIBRARY = $(OBJDIR)/$(SO_PREFIX)mozjs.$(SO_SUFFIX)
 PROGRAM = $(OBJDIR)/js
 endif
 
